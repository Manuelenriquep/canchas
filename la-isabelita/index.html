<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complejo La Isabelita | Pagos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body {
            background-color: #f0fdf4;
            font-family: system-ui, sans-serif;
        }

        .grass-bg {
            background-color: #166534;
            background-image: repeating-linear-gradient(45deg, #14532d 25%, transparent 25%, transparent 75%, #14532d 75%, #14532d), repeating-linear-gradient(45deg, #14532d 25%, #166534 25%, #166534 75%, #14532d 75%, #14532d);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
        }

        .btn-selected {
            background-color: #166534 !important;
            color: white !important;
            border-color: #166534 !important;
        }
    </style>
</head>

<body class="flex flex-col items-center justify-center min-h-screen p-4">

    <div class="bg-white rounded-3xl shadow-2xl w-full max-w-md overflow-hidden border border-green-800">

        <div class="grass-bg p-6 text-center text-white border-b-4 border-yellow-400">
            <h1 class="text-3xl font-black uppercase tracking-wider italic">La Isabelita</h1>
            <p class="text-green-100 text-xs font-bold tracking-widest uppercase mt-1">Complejo Deportivo</p>
        </div>

        <div id="form-view" class="p-5 space-y-6">

            <div>
                <p class="text-xs font-bold text-gray-400 uppercase mb-2 flex items-center gap-1">
                    1Ô∏è‚É£ Selecciona la Cancha
                </p>
                <div class="grid grid-cols-5 gap-2">
                    <button onclick="selectField(1)" id="btn-c1"
                        class="field-btn py-3 rounded-lg border-2 border-green-100 text-green-700 font-black hover:bg-green-50 transition">1</button>
                    <button onclick="selectField(2)" id="btn-c2"
                        class="field-btn py-3 rounded-lg border-2 border-green-100 text-green-700 font-black hover:bg-green-50 transition">2</button>
                    <button onclick="selectField(3)" id="btn-c3"
                        class="field-btn py-3 rounded-lg border-2 border-green-100 text-green-700 font-black hover:bg-green-50 transition">3</button>
                    <button onclick="selectField(4)" id="btn-c4"
                        class="field-btn py-3 rounded-lg border-2 border-green-100 text-green-700 font-black hover:bg-green-50 transition">4</button>
                    <button onclick="selectField(5)" id="btn-c5"
                        class="field-btn py-3 rounded-lg border-2 border-green-100 text-green-700 font-black hover:bg-green-50 transition">5</button>
                </div>
            </div>

            <div id="payment-options" class="opacity-50 pointer-events-none transition-opacity">
                <p class="text-xs font-bold text-gray-400 uppercase mb-2">2Ô∏è‚É£ Tipo de Pago</p>
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="setAmount(5, 'Anticipo')"
                        class="bg-green-50 hover:bg-green-100 border border-green-200 text-green-800 py-3 rounded-xl font-bold text-xs flex flex-col items-center">
                        <span>üéüÔ∏è Apartar</span>
                        <span class="text-[10px] opacity-75">$20.000 (5 USDC)</span>
                    </button>
                    <button onclick="setAmount(20, 'Partido')"
                        class="bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold text-xs flex flex-col items-center shadow-md">
                        <span>‚öΩÔ∏è Partido</span>
                        <span class="text-[10px] opacity-75">$80.000 (20 USDC)</span>
                    </button>
                </div>
            </div>

            <hr class="border-gray-100">

            <button onclick="selectSalon()"
                class="w-full bg-purple-50 hover:bg-purple-100 border border-purple-200 text-purple-900 py-3 rounded-xl flex items-center justify-between px-4 transition group">
                <span class="text-xs font-bold uppercase flex items-center gap-2">
                    <span class="bg-purple-200 p-1 rounded">üéâ</span> Sal√≥n de Eventos
                </span>
                <span class="text-xs font-bold group-hover:underline">Pagar Reserva ‚Üí</span>
            </button>

            <div class="bg-gray-50 p-4 rounded-xl border border-gray-200">
                <label class="block text-[10px] font-bold text-gray-400 uppercase mb-1">Concepto Final</label>
                <input type="text" id="memo" readonly
                    class="w-full bg-transparent border-none p-0 text-sm font-bold text-slate-700 focus:ring-0 mb-2"
                    value="...">

                <div class="flex items-end justify-between border-t border-gray-200 pt-2">
                    <span class="text-xs text-gray-500">Total a Pagar:</span>
                    <div class="text-right">
                        <span class="text-2xl font-black text-slate-800" id="display-total">0.00</span>
                        <span class="text-xs font-bold text-green-600">USDC</span>
                    </div>
                </div>
                <input type="hidden" id="amount" value="0">
            </div>

            <button onclick="generateQR()" id="btn-pay" disabled
                class="w-full bg-gray-300 text-white font-bold py-4 rounded-xl transition shadow-lg flex justify-center items-center gap-2 cursor-not-allowed">
                Generar C√≥digo QR üèÅ
            </button>
        </div>

        <div id="qr-view" class="hidden p-8 text-center bg-white h-full">
            <h2 id="final-amount-display" class="text-4xl font-black text-slate-900 mb-1">$0.00</h2>
            <p class="text-xs text-gray-400 uppercase font-bold tracking-widest mb-6">Escanea con Phantom</p>

            <div class="bg-white p-2 rounded-xl inline-block shadow-2xl border-4 border-green-600 mb-6 mx-auto">
                <div id="qrcode"></div>
            </div>

            <p id="final-memo-display"
                class="text-sm text-gray-800 font-medium bg-green-50 p-2 rounded border border-green-100 mb-6">...</p>

            <button onclick="reset()"
                class="w-full bg-gray-100 hover:bg-gray-200 text-gray-600 font-bold py-3 rounded-xl transition">
                ‚Üê Nueva Transacci√≥n
            </button>
        </div>

    </div>

    <p class="mt-4 text-[10px] text-green-800 opacity-60 font-medium">Sistema de Pagos: Guanes.biz</p>

    <script>
        // ==========================================
        // ‚öôÔ∏è CONFIGURACI√ìN ISABELITA
        // ==========================================
        const RECIPIENT_WALLET = "Guanes62..."; // <--- ¬°WALLET DE LA SOBRINA!
        const USDC_MINT = "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v";

        let currentField = null; // Guarda qu√© cancha se seleccion√≥ (1-5) o 'Salon'

        function selectField(num) {
            // Reiniciar estilos
            document.querySelectorAll('.field-btn').forEach(btn => btn.classList.remove('btn-selected'));

            // Activar bot√≥n seleccionado
            document.getElementById(`btn-c${num}`).classList.add('btn-selected');

            // Habilitar panel de precios
            currentField = `Cancha ${num}`;
            document.getElementById('payment-options').classList.remove('opacity-50', 'pointer-events-none');

            // Limpiar valores previos
            document.getElementById('memo').value = `Selecciona monto para ${currentField}...`;
            document.getElementById('amount').value = 0;
            document.getElementById('display-total').innerText = "0.00";
            updatePayButton();
        }

        function selectSalon() {
            // Deseleccionar canchas
            document.querySelectorAll('.field-btn').forEach(btn => btn.classList.remove('btn-selected'));
            document.getElementById('payment-options').classList.add('opacity-50', 'pointer-events-none');

            currentField = "Sal√≥n de Eventos";

            // Monto autom√°tico sugerido para Sal√≥n (Reserva)
            document.getElementById('amount').value = 25; // 100k
            document.getElementById('display-total').innerText = "25.00";
            document.getElementById('memo').value = "Reserva Sal√≥n de Eventos";
            updatePayButton();
        }

        function setAmount(val, type) {
            if (!currentField) return;

            document.getElementById('amount').value = val;
            document.getElementById('display-total').innerText = val.toFixed(2);
            document.getElementById('memo').value = `${type} - ${currentField}`;
            updatePayButton();
        }

        function updatePayButton() {
            const amount = parseFloat(document.getElementById('amount').value);
            const btn = document.getElementById('btn-pay');

            if (amount > 0) {
                btn.disabled = false;
                btn.classList.remove('bg-gray-300', 'cursor-not-allowed');
                btn.classList.add('bg-slate-900', 'hover:bg-slate-800');
            } else {
                btn.disabled = true;
                btn.classList.add('bg-gray-300', 'cursor-not-allowed');
                btn.classList.remove('bg-slate-900', 'hover:bg-slate-800');
            }
        }

        function generateQR() {
            const amount = document.getElementById("amount").value;
            const memo = document.getElementById("memo").value;

            if (!amount || amount <= 0) return;

            const solanaUrl = `solana:${RECIPIENT_WALLET}?amount=${amount}&spl-token=${USDC_MINT}&message=${encodeURIComponent(memo)}`;

            document.getElementById("qrcode").innerHTML = "";
            new QRCode(document.getElementById("qrcode"), {
                text: solanaUrl,
                width: 200,
                height: 200,
                colorDark: "#166534",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            document.getElementById("final-amount-display").innerText = `$${amount}`;
            document.getElementById("final-memo-display").innerText = memo;
            document.getElementById("form-view").classList.add("hidden");
            document.getElementById("qr-view").classList.remove("hidden");
        }

        function reset() {
            document.getElementById("form-view").classList.remove("hidden");
            document.getElementById("qr-view").classList.add("hidden");
            // Reiniciar estado
            currentField = null;
            document.querySelectorAll('.field-btn').forEach(btn => btn.classList.remove('btn-selected'));
            document.getElementById('payment-options').classList.add('opacity-50', 'pointer-events-none');
            document.getElementById('memo').value = "...";
            document.getElementById('amount').value = 0;
            document.getElementById('display-total').innerText = "0.00";
            updatePayButton();
        }
    </script>
</body>

</html>